import { severityLabelName, severityLevels } from "@allurereport/core-api";
import { createEmptyStats } from "../chart-utils.js";
const processTestResults = (testResults) => {
    return testResults.reduce((acc, test) => {
        const severityLabel = test.labels?.find((label) => label.name === severityLabelName);
        const severity = severityLabel?.value?.toLowerCase();
        if (severity) {
            acc[severity] = (acc[severity] ?? 0) + 1;
        }
        return acc;
    }, createEmptyStats(severityLevels));
};
export const severityTrendDataAccessor = {
    getCurrentData: ({ testResults }) => {
        return processTestResults(testResults);
    },
    getHistoricalData: (historyPoint) => {
        return processTestResults(Object.values(historyPoint.testResults));
    },
    getAllValues: () => severityLevels,
};
